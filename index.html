<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>RTI Schedule Monitor</title>
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    table { width: 100%; }
  </style>
</head>
<body>
  <h1>RTI Schedule Monitor</h1>
  <table id="report" class="display"></table>

  <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
  <script>
    $(document).ready(function() {
      $('#report').DataTable({
        ajax: 'latest.json',
        columns: [
          { data: 'timestamp', title: 'Timestamp' },
          { data: 'date', title: 'Date' },
          { data: 'lang', title: 'Language' },
          { data: 'program_title', title: 'Program Title' },
          { data: 'program_url', title: 'Program URL',
            render: function(data){ return `<a href="${data}" target="_blank">${data}</a>`; }},
          { data: 'episode_title', title: 'Episode Title' },
          { data: 'episode_url', title: 'Episode URL',
            render: function(data){ return `<a href="${data}" target="_blank">${data}</a>`; }},
          { data: 'audio_ok', title: 'Audio OK' },
          { data: 'audio_urls', title: 'Audio URLs',
            render: function(data){ return data.split(';').map(u=>`<a href="${u}" target="_blank">link</a>`).join(', '); }},
          { data: 'audio_sizes_kb', title: 'Audio Sizes (KB)' },
          { data: 'bulletin_len', title: 'Bulletin Length' },
          { data: 'bulletin_ok', title: 'Bulletin OK' },
          { data: 'status', title: 'Status' },
          { data: 'issues', title: 'Issues' }
        ],
        pageLength: 25
      });
    });
  </script>
</body>
</html>
