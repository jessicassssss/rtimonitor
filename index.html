<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>RTI Schedule Monitor Dashboard</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- DataTables CSS -->
  <link href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<div class="container py-4">
  <h1 class="mb-4 text-center">RTI Schedule Monitor Dashboard</h1>
  
  <div class="table-responsive">
    <table id="report" class="table table-striped table-bordered" style="width:100%">
      <thead>
        <tr>
          <th>Timestamp</th>
          <th>Date</th>
          <th>Language</th>
          <th>Program</th>
          <th>Episode</th>
          <th>Audio OK</th>
          <th>Bulletin OK</th>
          <th>Status</th>
          <th>Issues</th>
        </tr>
      </thead>
    </table>
  </div>
</div>

<!-- jQuery -->
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<!-- DataTables JS -->
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>

<script>
$(document).ready(function() {
  fetch('schedule-report.json')
    .then(response => {
      if (!response.ok) {
        throw new Error("Network response was not ok " + response.statusText);
      }
      return response.json();
    })
    .then(data => {
      $('#report').DataTable({
        data: data,
        columns: [
          { data: 'timestamp' },
          { data: 'date' },
          { data: 'lang' },
          { data: 'program_title' },
          { data: 'episode_title' },
          { data: 'audio_ok' },
          { data: 'bulletin_ok' },
          { data: 'status' },
          { data: 'issues' }
        ],
        order: [[1, 'desc']],   // 預設依日期倒序
        pageLength: 25,
      });
    })
    .catch(error => {
      console.error('Error loading JSON:', error);
      document.body.innerHTML += `<div class="alert alert-danger">⚠️ 無法載入 schedule-report.json (${error.message})</div>`;
    });
});
</script>
</body>
</html>
